{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = new SimpleLightbox('.gallery a');\nconst loadButton = document.querySelector('.btn');\nexport function clearGallery() {\n    const galleryElement = document.querySelector('.gallery');\n    galleryElement.innerHTML = '';\n}\n\nexport function renderImages(imagesHits) {\n    const galleryElement = document.querySelector('.gallery');\n    const imageElements = imagesHits.map(image => {\n        return `\n        <li class=\"item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image\"/>\n            </a>\n            <ul class=\"stats-list\">\n                <li class=\"stats-list-item\">\n            <h3>Likes</h3>\n            <p>${image.likes}</p>\n                </li>\n                <li class=\"stats-list-item\">\n            <h3>Views</h3>\n            <p>${image.views}</p>\n                </li>\n                <li class=\"stats-list-item\">\n            <h3>Comments</h3>\n            <p>${image.comments}</p>\n                </li>\n                <li class=\"stats-list-item\">\n            <h3>Downloads</h3>\n            <p>${image.downloads}</p>\n                </li>\n            </ul>    \n        </li>\n        `;\n    }).join('');\n\n\n    galleryElement.insertAdjacentHTML('beforeend', imageElements);\n    \n    gallery.refresh();\n\n    \n\n    return imageElements\n\n    \n    \n}\n\nexport function showLoader() {\n    document.querySelector('.loader').style.display = 'block';\n}\nexport function showButton() {\n    loadButton.classList.replace('btn-hidden', 'btn');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader').style.display = 'none';\n    \n}\nexport function hideButton() {\n    loadButton.classList.replace('btn', 'btn-hidden');\n}\n\nwindow.addEventListener('load', () => {\n    document.querySelector('.loader').style.display = 'block'; \n    setTimeout(() => {\n        document.querySelector('.loader').style.display = 'none'; \n    }, 500);\n});","import axios from 'axios';\n\nconst API_KEY = '43277181-ebb9172f58fa43bc64ca23581';\n\nconst per_page = 15;\n\nexport async function fetchImages(searchQuery, page) {\n   \n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page\n    })\n   \n   \n        \n    const url = `https://pixabay.com/api/?${params}`;\n    try {     \n        const response = await axios(url);\n        return response.data;\n        }\n        catch(error){\n            throw new Error('Failed to fetch images. Please try again later!');\n        };\n}\n\n\n  \n","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport { clearGallery, renderImages, showLoader, hideLoader, hideButton, showButton } from './js/render-functions';\n\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst loadButton = document.querySelector('.btn');\n\nconst form = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nlet page = 1;\nlet totalPage;\n\n\n\nconst formSubmit = (event) => {\n    page = 1;\n    clearGallery();\n    handleSubmit(event);\n    hideButton();\n    };\n\nform.addEventListener('submit', formSubmit);\nloadButton.addEventListener('click', handleSubmit);\n\n\n\nasync function handleSubmit(event) {\n    \n    event.preventDefault();\n    const searchQuery = searchInput.value.trim();\n    if (!searchQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query',\n        });\n        return;\n    }\n\n    try { \n        showLoader();\n\n        const images = await fetchImages(searchQuery, page);\n        const imagesHits = images.hits;\n        const imageTotalHits = images.totalHits;\n        if (imagesHits.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n        } else {\n            if (page === 1) {\n                totalPage = Math.ceil(imageTotalHits / imagesHits.length);\n            }\n            page++;\n            renderImages(imagesHits);\n                        if (page !== 2) {\n            const { height: cardHeight } = document\n                .querySelector('.gallery')\n                .firstElementChild.getBoundingClientRect();\n            window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: 'smooth',\n    });\n            }\n            showButton()\n            if (page > totalPage) {\n                hideButton();\n                iziToast.error({\n                title: 'Error',\n                message: 'We are sorry, but you have reached the end of search results.',\n            });\n            }\n        }\n \n        }\n    catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'We are sorry, but you have reached the end of search results.',\n            });\n        }\n        finally{\n            hideLoader();\n    };\n    \n}\n\n\n\n"],"names":["gallery","SimpleLightbox","loadButton","clearGallery","galleryElement","renderImages","imagesHits","imageElements","image","showLoader","showButton","hideLoader","hideButton","API_KEY","per_page","fetchImages","searchQuery","page","url","axios","form","searchInput","totalPage","formSubmit","event","handleSubmit","iziToast","images","imageTotalHits","cardHeight"],"mappings":"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"}